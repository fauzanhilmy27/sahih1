!function(t){var a={};function e(r){if(a[r])return a[r].exports;var o=a[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=a,e.d=function(t,a,r){e.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,a){if(1&a&&(t=e(t)),8&a)return t;if(4&a&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var o in t)e.d(r,o,function(a){return t[a]}.bind(null,o));return r},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},e.p="/",e(e.s=0)}({0:function(t,a,e){t.exports=e("xkrp")},xkrp:function(t,a){function e(){$(".ts-sly-frame").each((function(){var t=parseInt($(this).attr("data-ts-sly-horizontal"),2);t||(t=0);var a=$(this).attr("data-ts-sly-scrollbar");a||(a=0),$(this).sly({horizontal:t,smart:1,elasticBounds:1,speed:300,itemNav:"basic",mouseDragging:1,touchDragging:1,releaseSwing:1,scrollBar:$(a),dragHandle:1,scrollTrap:1,clickBar:1,scrollBy:1,dynamicHandle:1},{load:function(){$(this.frame).addClass("ts-loaded")}})}))}$(document).ready((function(t){"use strict";e();var a,r,o,i,n="ts-map-hero",s=[],l=[];if(t(".filter-map").each((function(a,e){t(e).on("change",(function(){T()}))})),t("#filter_name").keyup((function(){console.log(t(this).val()),T()})),t("#"+n).length){var d=t(document.getElementById(n)),c=parseInt(d.attr("data-ts-map-zoom"),10),p=d.attr("data-ts-map-center-latitude"),m=d.attr("data-ts-map-center-longitude"),u=(d.attr("data-ts-locale"),d.attr("data-ts-currency"),d.attr("data-ts-unit"),parseInt(d.attr("data-ts-map-controls"),10)),f=parseInt(d.attr("data-ts-map-scroll-wheel"),10),g=d.attr("data-ts-map-leaflet-provider"),v=d.attr("data-ts-map-leaflet-attribution"),b=d.attr("data-ts-map-zoom-position"),h=d.attr("data-ts-map-mapbox-access-token"),y=d.attr("data-ts-map-mapbox-id");if(d.attr("data-ts-display-additional-info"))for(var k=d.attr("data-ts-display-additional-info").split(";"),_=[],w=0;w<k.length;w++)_.push(k[w].split("_"));c||(c=14),(r=L.map(n,{zoomControl:!1,scrollWheelZoom:f})).setView([p,m],c),L.tileLayer(g,{attribution:v,id:y,accessToken:h}).addTo(r);var x=L.control({position:"bottomright"});x.onAdd=function(t){var a=L.DomUtil.create("div","legend");return a.innerHTML+="<h4>Legenda</h4>",a.innerHTML+='<i style="background: #1976D2;"></i><span>Pos Duga Air</span><br>',a.innerHTML+='<i style="background: #069550;"></i><span>Pos Curah Hujan</span><br>',a.innerHTML+='<i style="background: #E53935;"></i><span>Pos Klimatologi</span><br>',a},x.addTo(r);var A=L.control.layers(null,null,{position:"bottomright"}).addTo(r);t.getJSON("/storage/maps/das_cidanau_ciujung_cidurian.geojson",(function(t){L.geoJson(t,{style:function(t){return{weight:1.5,color:"#BA3AAC",fillColor:"#fff",fillOpacity:.3}},onEachFeature:function(t,a){null!=t.properties.NAMA_DAS&&(console.log(t),a.bindTooltip(t.properties.NAMA_DAS,{direction:"center",permanent:!1,opacity:1.5,className:"leaflet-tooltip-own"}).openTooltip(),A.addOverlay(a,t.properties.NAMA_DAS))}}).addTo(r)})),t.getJSON("/storage/maps/sungai_cidanau_ciujung_cidurian.geojson",(function(t){var a=L.geoJson(t,{style:function(t){return{weight:1,color:"#0089F7"}}}).addTo(r);A.addOverlay(a,"WS Kapuas")})),0!==u&&b?L.control.zoom({position:b}).addTo(r):0!==u&&L.control.zoom({position:"topright"}).addTo(r),T()}function T(a){console.log(t("#form-filter").serialize()),t.ajax({url:baseUrl+"/home/maps",dataType:"JSON",method:"POST",data:t("#form-filter").serialize(),headers:{"X-CSRF-TOKEN":token},beforeSend:function(){r.spin(!0),o&&(o.eachLayer((function(t){o.removeLayer(t)})),o.clearLayers())},success:function(t){r.spin(!1);var e=t;void 0!==a&&a.formData||(l=e),function(){o=L.markerClusterGroup({showCoverageOnHover:!1});for(var t=0;t<l.length;t++){var a=document.createElement("div"),e=void 0;e="AWLR"===l[t].type?"ts-awlr":"ARR"===l[t].type?"ts-arr":"AWLR & ARR"===l[t].type?"ts-awlr-arr":"AWS"===l[t].type?"ts-aws":"",a.innerHTML='<div class="ts-marker-wrapper"><a href="javascript:void(0)" class="ts-marker '+e+'" data-ts-id="'+l[t].id+'" data-ts-ln="'+t+'">'+(void 0!==l[t].name?'<div class="ts-marker__title">'+l[t].name+"</div>":"")+("AWLR"===l[t].type?'<div class="ts-marker__image" style="background-image: url(images/bg-awlr.jpg)"></div>':"")+("ARR"===l[t].type?'<div class="ts-marker__image" style="background-image: url(images/bg-arr.jpg)"></div>':"")+("AWLR & ARR"===l[t].type?'<div class="ts-marker__image" style="background-image: url(images/bg-awlr-arr.jpg)"></div>':"")+("AWS"===l[t].type?'<div class="ts-marker__image" style="background-image: url(images/bg-aws.jpg)"></div>':"")+"</a></div>",C({i:t,markerContent:a,method:"latitudeLongitude"})}r.addLayer(o)}()},error:function(t){console.log(t)}})}function C(e){var i=e.i;if(null!==l[i].latitude&&null!==l[i].longitude){var n=L.divIcon({html:e.markerContent.innerHTML,iconSize:[42,47],iconAnchor:[0,47]}),d=L.marker([l[i].latitude,l[i].longitude],{icon:n});d.loopNumber=i,o.addLayer(d),d.on("click",(function(){a&&a._icon&&t(a._icon.firstChild).removeClass("ts-hide-marker"),function(e){var o=e.i,i=e.parentMarker,n=e.id,s=document.createElement("div");!function(t){var a,e,r,o=t.i,i=t.infoboxHtml;"AWLR"===l[o].type?(a="ts-infobox-awlr",e="bg-popup-awlr.jpg",r="Duga Air"):"ARR"===l[o].type?(a="ts-infobox-arr",e="bg-popup-arr.jpg",r="Curah Hujan"):"AWLR & ARR"===l[o].type?(a="ts-infobox-awlr-arr",e="bg-popup-awlr-arr.jpg",r="PDA & PCH"):"AWS"===l[o].type?(a="ts-infobox-aws",e="bg-popup-aws.jpg",r="Klimatologi"):(a="",e="",r="");i.innerHTML='<div class="infobox-wrapper"><div class="ts-infobox '+a+'" data-ts-id="'+l[o].id+'"><img src="images/infobox-close.svg" class="ts-close"><div class="ts-infobox__wrapper"><div class="ts-infobox__content"><figure class="ts-item__info">'+(void 0!==l[o].name&&l[o].name.length>0?"<h4>"+l[o].name+"</h4>":"")+'<aside><i class="fe-map-pin mr-1"></i>'+l[o].location+'</aside></figure><div class="ts-description-lists mb-2"><div class="row"><div class="col-md-6"><dl><dt class="text-white">Tipe Pos</dt><dd>'+r+'</dd></dl></div><div class="col-md-6"><dl><dt class="text-white">Device ID</dt><dd class="text-uppercase">'+l[o].device.device_id+'</dd></dl></div></div></div><button type="button" class="btn btn-success btn-xs btn-block font-weight-normal" style="text-transform: none;" data="'+l[o].id+'" onclick="showDetail(this,event)"><i class="fa fa-info-circle"></i> Lihat Detail</button></div><div class="ts-infobox_image" style="background-image: url(images/'+e+');background-position: center top;"></div></div></div></div>'}({i:o,infoboxHtml:s});L.popup({closeButton:!1,offset:[120,0],closeOnClick:!1}).setLatLng([i._latlng.lat,i._latlng.lng]).setContent(s).openOn(r);a=i,i._markerIcon=i._icon.firstChild,t(i._icon.firstChild).addClass("ts-hide-marker"),setTimeout((function(){t(".ts-infobox[data-ts-id='"+n+"']").closest(".infobox-wrapper").addClass("ts-show"),t(".ts-infobox[data-ts-id='"+n+"'] .ts-close").on("click",(function(){t(".ts-infobox[data-ts-id='"+n+"']").closest(".infobox-wrapper").removeClass("ts-show"),t(i._markerIcon).removeClass("ts-hide-marker"),r.closePopup()}))}),50)}({id:t(this._icon).find(".ts-marker").attr("data-ts-id"),parentMarker:d,i:i,url:baseUrl+"/api/station/maps"})})),s.push(d)}}t(document).on("click",".ts-center-marker",(function(){t(".ts-marker").parent().removeClass("ts-active-marker"),r.setView(s[t(this).parent().attr("data-ts-ln")].getLatLng());var a=t(this).parent().attr("data-ts-id");t(".ts-marker[data-ts-id='"+a+"']").parent().addClass("ts-active-marker")})),t(document).on({mouseenter:function(){var a=t(this).parent().attr("data-ts-id");i=setTimeout((function(){t(".ts-marker").parent().addClass("ts-marker-hide"),t(".ts-marker[data-ts-id='"+a+"']").parent().addClass("ts-active-marker")}),500)},mouseleave:function(){clearTimeout(i),t(".ts-marker").parent().removeClass("ts-active-marker").removeClass("ts-marker-hide")}},".ts-result");if(t("#ts-map-simple").length){d=t(document.getElementById("ts-map-simple")),c=parseInt(d.attr("data-ts-map-zoom"),10),p=d.attr("data-ts-map-center-latitude"),m=d.attr("data-ts-map-center-longitude"),u=parseInt(d.attr("data-ts-map-controls"),10),f=parseInt(d.attr("data-ts-map-scroll-wheel"),10),g=d.attr("data-ts-map-leaflet-provider");var j=parseInt(d.attr("data-ts-map-marker-drag"),10);c||(c=14),(r=L.map("ts-map-simple",{zoomControl:!1,scrollWheelZoom:f})).setView([p,m],c),L.tileLayer(g,{attribution:v,id:y,accessToken:h}).addTo(r),1===u&&L.control.zoom({position:"topright"}).addTo(r);var S=L.icon({iconUrl:"assets/img/marker-small.png",iconSize:[22,29],iconAnchor:[11,29]});L.marker([p,m],{icon:S,draggable:j}).addTo(r)}}))}});